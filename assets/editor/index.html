<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Herding Cats Editor</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #ffffff;
            color: #333;
        }
        #editor {
            border: 1px solid #ccc;
            min-height: 400px;
            padding: 10px;
            border-radius: 4px;
            outline: none;
        }
        .ProseMirror {
            outline: none;
        }
        /* Basic Tiptap Styles */
        h1 { font-size: 2em; }
        h2 { font-size: 1.5em; }
        ul, ol { padding-left: 1.2em; }
        blockquote { border-left: 3px solid #ccc; padding-left: 1em; margin-left: 0; }
    </style>
    <!-- Load Tiptap from CDN for prototype (Replace with local bundle for production) -->
    <script type="module">
        import { Editor } from 'https://esm.sh/@tiptap/core';
        import StarterKit from 'https://esm.sh/@tiptap/starter-kit';

        // IPC Bridge
        const ipc = window.ipc;

        const editor = new Editor({
            element: document.querySelector('#editor'),
            extensions: [
                StarterKit,
            ],
            content: '<p>Start writing...</p>',
            onUpdate: ({ editor }) => {
                const json = editor.getJSON();
                // Send JSON to Rust
                if (window.ipc) {
                    window.ipc.postMessage(JSON.stringify({
                        type: 'content_update',
                        content: json
                    }));
                }
            },
        });

        // Handle messages from Rust
        window.addEventListener('message', (event) => {
            const message = event.data; // Assuming Rust sends JSON
            if (message.type === 'load_content') {
                editor.commands.setContent(message.content);
            }
        });
    </script>
</head>
<body>
    <div id="editor"></div>
</body>
</html>
