// Enhanced Writing Tools Windows for Herding Cats Rust
// Individual tool windows with resize and drag functionality

import {
    Button,
    TextEdit,
    ScrollView,
    HorizontalBox,
    VerticalBox,
    GridBox,
    StandardButton,
    LineEdit,
    ComboBox,
    ListView,
} from "std-widgets.slint";

// Base window component with resize and drag functionality
component ResizableWindow inherits Window {
    // Window state properties
    in-out property <bool> is-dragging: false;
    in-out property <bool> is-resizing: false;
    in-out property <point> drag-offset: { x: 0, y: 0 };
    in-out property <string> resize-handle: "none";

    // Visual properties
    property <color> border-color: is-dragging ? #4a90e2 : #dddddd;
    property <color> handle-color: is-resizing ? #4a90e2 : #888888;
    property <bool> is-minimized: false;
    property <bool> is-maximized: false;

    // Window control callbacks
    callback window-dragged(point);
    callback window-resized(string, point);
    callback window-minimize();
    callback window-maximize();
    callback window-close();
    callback window-restored();

    // Custom window container
    Rectangle {
        visible: !is-minimized;
        background: #f8f9fa;
        border-width: 2px;
        border-color: border-color;
        border-radius: 8px;
        drop-shadow-color: is-dragging ? #4a90e2 : #000000;
        drop-shadow-blur: is-dragging ? 10 : 5;
        drop-shadow-offset: { x: 0, y: is-dragging ? 4 : 2 };

        // Custom title bar with drag functionality
        Rectangle {
            height: 35px;
            background: #343a40;
            border-radius: 6px;

            // Drag area
            TouchArea {
                width: parent.width - 100px; // Leave space for control buttons
                height: parent.height;
                pointer-event(event) => {
                    if (event.kind == PointerEventKind.down) {
                        root.is-dragging = true;
                        root.drag-offset = { x: event.x, y: event.y };
                        root.window-dragged({ x: event.x, y: event.y });
                    } else if (event.kind == PointerEventKind.up) {
                        root.is-dragging = false;
                    } else if (event.kind == PointerEventKind.motion) {
                        root.window-dragged({ x: event.x, y: event.y });
                    }
                }
            }

            HorizontalBox {
                padding: 8px;

                // Window control buttons
                Rectangle {
                    width: 80px;

                    // Minimize button
                    Rectangle {
                        width: 12px;
                        height: 12px;
                        background: #28a745;
                        border-radius: 50%;
                        TouchArea {
                            clicked => {
                                root.window-minimize();
                            }
                        }
                    }

                    // Maximize button
                    Rectangle {
                        width: 12px;
                        height: 12px;
                        background: #ffc107;
                        border-radius: 50%;
                        TouchArea {
                            clicked => {
                                if (is-maximized) {
                                    root.window-restored();
                                } else {
                                    root.window-maximize();
                                }
                            }
                        }
                    }

                    // Close button
                    Rectangle {
                        width: 12px;
                        height: 12px;
                        background: #dc3545;
                        border-radius: 50%;
                        TouchArea {
                            clicked => {
                                root.window-close();
                            }
                        }
                    }
                }

                // Window title
                Text {
                    text: root.title;
                    color: white;
                    font-size: 14px;
                    font-weight: 600;
                }

                Rectangle { }
            }
        }

        // Main content area
        Rectangle {
            y: 35px;
            height: parent.height - 35px;
            background: white;
            border-radius: 6px;

            // Resize handles
            // Bottom right corner resize handle
            Rectangle {
                visible: !is-maximized;
                x: parent.width - 15;
                y: parent.height - 15;
                width: 15px;
                height: 15px;
                background: handle-color;
                border-radius: 6px;
                cursor: nwse-resize;
                TouchArea {
                    pointer-event(event) => {
                        if (event.kind == PointerEventKind.down) {
                            root.is-resizing = true;
                            root.resize-handle = "bottom-right";
                            root.window-resized("bottom-right", { x: event.x, y: event.y });
                        } else if (event.kind == PointerEventKind.up) {
                            root.is-resizing = false;
                            root.resize-handle = "none";
                        } else if (event.kind == PointerEventKind.motion) {
                            root.window-resized("bottom-right", { x: event.x, y: event.y });
                        }
                    }
                }
            }

            // Right edge resize handle
            Rectangle {
                visible: !is-maximized;
                x: parent.width - 3;
                y: 0;
                width: 3px;
                height: parent.height - 15;
                background: handle-color;
                cursor: ew-resize;
                TouchArea {
                    pointer-event(event) => {
                        if (event.kind == PointerEventKind.down) {
                            root.is-resizing = true;
                            root.resize-handle = "right";
                            root.window-resized("right", { x: event.x, y: event.y });
                        } else if (event.kind == PointerEventKind.up) {
                            root.is-resizing = false;
                            root.resize-handle = "none";
                        } else if (event.kind == PointerEventKind.motion) {
                            root.window-resized("right", { x: event.x, y: event.y });
                        }
                    }
                }
            }

            // Bottom edge resize handle
            Rectangle {
                visible: !is-maximized;
                x: 0;
                y: parent.height - 3;
                width: parent.width - 15;
                height: 3px;
                background: handle-color;
                cursor: ns-resize;
                TouchArea {
                    pointer-event(event) => {
                        if (event.kind == PointerEventKind.down) {
                            root.is-resizing = true;
                            root.resize-handle = "bottom";
                            root.window-resized("bottom", { x: event.x, y: event.y });
                        } else if (event.kind == PointerEventKind.up) {
                            root.is-resizing = false;
                            root.resize-handle = "none";
                        } else if (event.kind == PointerEventKind.motion) {
                            root.window-resized("bottom", { x: event.x, y: event.y });
                        }
                    }
                }
            }
        }
    }
}

// Enhanced Hierarchy Tool Window
export component HierarchyToolEnhanced inherits ResizableWindow {
    title: "üìä Document Hierarchy - Enhanced";

    // Override content area
    Rectangle {
        y: 35px;
        height: parent.height - 35px;
        background: white;
        border-radius: 6px;
        VerticalBox {
            padding: 10px;
            spacing: 10px;

            // Tool Title
            Text {
                text: "üìä Document Hierarchy";
                font-size: 16px;
                font-weight: 700;
            }

            // Hierarchy Tree View
            ListView {
                height: 400px;
                model: [
                    { text: "Chapter 1: Introduction", progress: "‚úì Complete" },
                    { text: "Chapter 2: Background", progress: "üîÑ In Progress" },
                    { text: "Chapter 3: Main Story", progress: "üìù Planned" },
                    { text: "Chapter 4: Climax", progress: "üìù Planned" },
                    { text: "Chapter 5: Resolution", progress: "üìù Planned" },
                ];
                delegate := VerticalBox {
                    padding: 5px;
                    Rectangle {
                        height: 40px;
                        background: #f0f0f0;
                        border-radius: 4px;
                        HorizontalBox {
                            Text {
                                text: root.current_item.text;
                                font-size: 12px;
                                vertical-alignment: center;
                            }

                            Rectangle { }

                            Text {
                                text: root.current_item.progress;
                                font-size: 10px;
                                color: #666;
                                vertical-alignment: center;
                            }
                        }
                    }
                }
            }

            // Hierarchy Controls
            HorizontalBox {
                Button {
                    text: "‚ûï Add Chapter"; }
               

                Button {
                    text: "‚úèÔ∏è Edit"; }
               

                Button {
                    text: "üóëÔ∏è Delete"; }
               
            }

            HorizontalBox {
                Button {
                    text: "‚¨ÜÔ∏è Move Up"; }
               

                Button {
                    text: "‚¨áÔ∏è Move Down"; }
               

                Button {
                    text: "üîÑ Reorganize"; }
               
            }
        }
    }
}

// Enhanced Codex Tool Window
export component CodexToolEnhanced inherits ResizableWindow {
    title: "üìñ World Building Codex - Enhanced";
    Rectangle {
        y: 35px;
        height: parent.height - 35px;
        background: white;
        border-radius: 6px;
        VerticalBox {
            padding: 10px;
            spacing: 10px;

            // Tool Title
            Text {
                text: "üìñ World Building Codex";
                font-size: 16px;
                font-weight: 700;
            }

            // Codex Categories with enhanced styling
            HorizontalBox {
                Button {
                    text: "üë• Characters";
                    background: #e3f2fd;
                    color: #1976d2;
                }

                Button {
                    text: "üìç Locations";
                    background: #f3e5f5;
                    color: #7b1fa2;
                }

                Button {
                    text: "‚ö° Magic/Tech";
                    background: #e8f5e8;
                    color: #388e3c;
                }

                Button {
                    text: "üìú Events";
                    background: #fff3e0;
                    color: #f57c00;
                }
            }

            // Codex Content Area
            ScrollView {
                height: 450px;
                VerticalBox {
                    TextEdit {
                        text: "Codex entries will appear here...\n\nExample Entry:\n\nüë• Character Name: Alice\nDescription: A brave adventurer with a mysterious past\nSkills: Sword fighting, magic\nRelationships: Friend of Bob\nStatus: Active\n\nüìç Location Name: Mystic Forest\nDescription: Ancient woodland filled with magical creatures\nClimate: Temperate, misty\nDanger Level: Medium\nKnown Inhabitants: Elves, Fairies\n\n‚ö° Magic System: Elemental Magic\nRules: Must have natural affinity\nLimitations: Can only use 3 elements at once\nCost: Fatigue after extended use";
                        wrap: word-wrap;
                        font-size: 11px;
                    }
                }
            }

            // Enhanced Codex Controls
            HorizontalBox {
                Button {
                    text: "‚ûï Add Entry"; }
               

                Button {
                    text: "‚úèÔ∏è Edit"; }
               

                Button {
                    text: "üîç Search"; }
               
            }

            HorizontalBox {
                Button {
                    text: "üì§ Export"; }
               

                Button {
                    text: "üì• Import"; }
               

                Button {
                    text: "üóÇÔ∏è Categories"; }
               
            }
        }
    }
}

// Enhanced Plot Tool Window
export component PlotToolEnhanced inherits ResizableWindow {
    title: "üìà Plot Development - Enhanced";
    Rectangle {
        y: 35px;
        height: parent.height - 35px;
        background: white;
        border-radius: 6px;
        VerticalBox {
            padding: 10px;
            spacing: 10px;

            // Tool Title
            Text {
                text: "üìà Plot Development";
                font-size: 16px;
                font-weight: 700;
            }

            // Progress overview
            HorizontalBox {
                Rectangle {
                    background: #e8f5e8;
                    padding: 8px;
                    border-radius: 4px;
                    VerticalBox {
                        Text {
                            text: "Complete";
                            font-size: 10px;
                            color: #388e3c;
                        }

                        Text {
                            text: "2/6";
                            font-size: 14px;
                            font-weight: 600;
                        }
                    }
                }

                Rectangle {
                    background: #fff3e0;
                    padding: 8px;
                    border-radius: 4px;
                    VerticalBox {
                        Text {
                            text: "In Progress";
                            font-size: 10px;
                            color: #f57c00;
                        }

                        Text {
                            text: "1/6";
                            font-size: 14px;
                            font-weight: 600;
                        }
                    }
                }

                Rectangle {
                    background: #f3e5f5;
                    padding: 8px;
                    border-radius: 4px;
                    VerticalBox {
                        Text {
                            text: "Planned";
                            font-size: 10px;
                            color: #7b1fa2;
                        }

                        Text {
                            text: "3/6";
                            font-size: 14px;
                            font-weight: 600;
                        }
                    }
                }
            }

            // Plot Structure Timeline
            ListView {
                height: 350px;
                model: [
                    { text: "Act I: Setup - Character Introduction", status: "‚úì Complete", progress: 100 },
                    { text: "Act I: Inciting Incident", status: "‚úì Complete", progress: 100 },
                    { text: "Act II: Rising Action", status: "üîÑ In Progress", progress: 65 },
                    { text: "Act II: Midpoint Crisis", status: "üìù Planned", progress: 0 },
                    { text: "Act III: Climax", status: "üìù Planned", progress: 0 },
                    { text: "Act III: Resolution", status: "üìù Planned", progress: 0 },
                ];
                delegate := Rectangle {
                    height: 45px;
                    background: #f8f9fa;
                    border-radius: 6px;
                    margin: 2px;
                    padding: 8px;
                    VerticalBox {
                        HorizontalBox {
                            Text {
                                text: root.current_item.text;
                                font-size: 11px;
                                font-weight: 600;
                            }

                            Rectangle { }

                            Text {
                                text: root.current_item.status;
                                font-size: 10px;
                                color: #666;
                                vertical-alignment: center;
                            }
                        }

                        // Progress bar
                        Rectangle {
                            height: 4px;
                            background: #e0e0e0;
                            border-radius: 2px;
                            Rectangle {
                                height: parent.height;
                                width: (root.current_item.progress * parent.width) / 100;
                                background: root.current_item.progress == 100 ? #4caf50 : root.current_item.progress > 0 ? #ff9800 : #e0e0e0;
                                border-radius: 2px;
                            }
                        }
                    }
                }
            }

            // Enhanced Plot Controls
            HorizontalBox {
                Button {
                    text: "‚ûï Add Plot Point"; }
               

                Button {
                    text: "‚úèÔ∏è Edit"; }
               

                Button {
                    text: "üéØ Track Progress"; }
               
            }

            HorizontalBox {
                Button {
                    text: "üåâ Connect Scenes"; }
               

                Button {
                    text: "üìä Analytics"; }
               

                Button {
                    text: "üîÑ Timeline View"; }
               
            }
        }
    }
}

// Enhanced Analysis Tool Window
export component AnalysisToolEnhanced inherits ResizableWindow {
    title: "üìà Writing Analysis - Enhanced";
    Rectangle {
        y: 35px;
        height: parent.height - 35px;
        background: white;
        border-radius: 6px;
        VerticalBox {
            padding: 10px;
            spacing: 10px;

            // Tool Title
            Text {
                text: "üìà Writing Analysis";
                font-size: 16px;
                font-weight: 700;
            }

            // Statistics Grid
            GridBox {
                // Word Count Statistics
                Rectangle {
                    background: #f8f9fa;
                    border-radius: 6px;
                    padding: 10px;
                    VerticalBox {
                        Text {
                            text: "üìù Word Count";
                            font-size: 12px;
                            font-weight: 600;
                       

                        Text {
                            text: "1,247 words";
                            font-size: 18px;
                            font-weight: 700;
                            color: #2c3e50;
                        }

                        Text {
                            text: "Session: +203";
                            font-size: 10px;
                            color: #27ae60;
                        }
                    }
                }

                // Character Count
                Rectangle {
                    background: #e8f5e8;
                    border-radius: 6px;
                    padding: 10px;
                    VerticalBox {
                        Text {
                            text: "üî§ Characters";
                            font-size: 12px;
                            font-weight: 600;
                       

                        Text {
                            text: "7,432 chars";
                            font-size: 18px;
                            font-weight: 700;
                            color: #27ae60;
                        }

                        Text {
                            text: "Avg: 250/page";
                            font-size: 10px;
                            color: #666;
                        }
                    }
                }

                // Reading Time
                Rectangle {
                    background: #fff3cd;
                    border-radius: 6px;
                    padding: 10px;
                    VerticalBox {
                        Text {
                            text: "‚è±Ô∏è Reading Time";
                            font-size: 12px;
                            font-weight: 600;
                       

                        Text {
                            text: "~5 min";
                            font-size: 18px;
                            font-weight: 700;
                            color: #f39c12;
                        }

                        Text {
                            text: "At 250 wpm";
                            font-size: 10px;
                            color: #666;
                        }
                    }
                }

                // Pages
                Rectangle {
                    background: #e3f2fd;
                    border-radius: 6px;
                    padding: 10px;
                    VerticalBox {
                        Text {
                            text: "üìÑ Pages";
                            font-size: 12px;
                            font-weight: 600;
                       

                        Text {
                            text: "3.2 pages";
                            font-size: 18px;
                            font-weight: 700;
                            color: #3498db;
                        }

                        Text {
                            text: "Estimated";
                            font-size: 10px;
                            color: #666;
                        }
                    }
                }
            }

            // Analysis Controls
            HorizontalBox {
                Button {
                    text: "üìä Generate Report"; }
               

                Button {
                    text: "üìà Trends"; }
               

                Button {
                    text: "üéØ Goals"; }
               
            }
        }
    }
}

// Enhanced Notes Tool Window
export component NotesToolEnhanced inherits ResizableWindow {
    title: "üìù Research Notes - Enhanced";
    Rectangle {
        y: 35px;
        height: parent.height - 35px;
        background: white;
        border-radius: 6px;
        VerticalBox {
            padding: 10px;
            spacing: 10px;

            // Tool Title
            Text {
                text: "üìù Research Notes";
                font-size: 16px;
                font-weight: 700;
            }

            // Notes Categories with enhanced styling
            HorizontalBox {
                Button {
                    text: "üìö Research";
                    background: #e3f2fd;
                    color: #1976d2;
                }

                Button {
                    text: "üí° Ideas";
                    background: #f3e5f5;
                    color: #7b1fa2;
                }

                Button {
                    text: "üé≠ Characters";
                    background: #e8f5e8;
                    color: #388e3c;
                }

                Button {
                    text: "üìç Worldbuilding";
                    background: #fff3e0;
                    color: #f57c00;
                }
            }

            // Notes List
            ListView {
                height: 400px;
                model: [
                    {
                        title: "Historical Context Research",
                        category: "Research",
                        content: "Medieval England social structure and customs",
                        date: "2025-11-05",
                        priority: "High",
                        tags: "history,medieval,social-structure"
                    },
                    {
                        title: "Character Arc Ideas",
                        category: "Ideas",
                        content: "Alice's transformation from skeptic to believer",
                        date: "2025-11-04",
                        priority: "Medium",
                        tags: "character,arc,development"
                    },
                    {
                        title: "Magic System Notes",
                        category: "Worldbuilding",
                        content: "Consistent rules for spell casting and limitations",
                        date: "2025-11-03",
                        priority: "High",
                        tags: "magic,system,rules"
                    },
                    {
                        title: "Dialogue Research",
                        category: "Research",
                        content: "Authentic period speech patterns",
                        date: "2025-11-02",
                        priority: "Medium",
                        tags: "dialogue,research,period"
                    },
                    {
                        title: "Plot Twist Ideas",
                        category: "Ideas",
                        content: "The mysterious mentor has hidden agenda",
                        date: "2025-11-01",
                        priority: "Low",
                        tags: "plot,twist,mentor"
                    },
                ];
                delegate := Rectangle {
                    height: 80px;
                    background: #f8f9fa;
                    border-radius: 6px;
                    margin: 2px;
                    padding: 8px;
                    VerticalBox {
                        HorizontalBox {
                            Text {
                                text: root.current_item.title;
                                font-size: 12px;
                                font-weight: 600;
                                color: #2c3e50;
                            }

                            Rectangle { }

                            Text {
                                text: root.current_item.priority;
                                font-size: 9px;
                                color: root.current_item.priority == "High" ? #dc3545 : root.current_item.priority == "Medium" ? #ffc107 : #28a745;
                                font-weight: 600;
                            }
                        }

                        Text {
                            text: root.current_item.content;
                            font-size: 10px;
                            color: #666;
                            wrap: word-wrap;
                        }

                        HorizontalBox {
                            Text {
                                text: "üè∑Ô∏è " + root.current_item.tags;
                                font-size: 8px;
                                color: #999;
                            }

                            Rectangle { }

                            Text {
                                text: root.current_item.date;
                                font-size: 9px;
                                color: #999;
                            }
                        }
                    }
                }
            }

            // Enhanced Notes Controls
            HorizontalBox {
                Button {
                    text: "‚ûï Add Note"; }
               

                Button {
                    text: "‚úèÔ∏è Edit"; }
               

                Button {
                    text: "üîç Search"; }
               
            }

            HorizontalBox {
                Button {
                    text: "üìÅ Organize"; }
               

                Button {
                    text: "üè∑Ô∏è Tag";
               

                Button {
                    text: "üì§ Export"; }
               
            }
        }
    }
}

// Enhanced Research Tool Window
export component ResearchToolEnhanced inherits ResizableWindow {
    title: "üîç Research & Sources - Enhanced";
    Rectangle {
        y: 35px;
        height: parent.height - 35px;
        background: white;
        border-radius: 6px;
        VerticalBox {
            padding: 10px;
            spacing: 10px;

            // Tool Title
            Text {
                text: "üîç Research & Sources";
                font-size: 16px;
                font-weight: 700;
            }

            // Research Categories with enhanced styling
            HorizontalBox {
                Button {
                    text: "üìö Books";
                    background: #e8f5e8;
                    color: #388e3c;
                }

                Button {
                    text: "üåê Websites";
                    background: #e3f2fd;
                    color: #1976d2;
                }

                Button {
                    text: "üìÑ Articles";
                    background: #fff3e0;
                    color: #f57c00;
                }

                Button {
                    text: "üìä Data";
                    background: #f3e5f5;
                    color: #7b1fa2;
                }

                Button {
                    text: "üé• Videos";
                    background: #fce4ec;
                    color: #c2185b;
                }
            }

            // Research Sources List
            ScrollView {
                height: 400px;
                VerticalBox {
                    // Research Source Entry Template
                    Rectangle {
                        background: #ffffff;
                        border-width: 1px;
                        border-color: #dee2e6;
                        border-radius: 8px;
                        padding: 12px;
                        margin: 4px;
                        VerticalBox {
                            HorizontalBox {
                                Text {
                                    text: "üìñ 'The Time Traveler's Guide to Medieval England'";
                                    font-size: 13px;
                                    font-weight: 600;
                                    color: #2c3e50;
                                }

                                Rectangle { }

                                Text {
                                    text: "‚≠ê 5.0";
                                    font-size: 10px;
                                    color: #ffc107;
                                }
                            }

                            Text {
                                text: "Author: Ian Mortimer | Type: Book | Pages: 672\nRelevant: Social hierarchy, daily life, customs | Status: Read\nNotes: Excellent source for authentic medieval dialogue patterns";
                                font-size: 10px;
                                color: #666;
                            }

                            HorizontalBox {
                                Button {
                                    text: "üîó Open";
                               

                                Button {
                                    text: "üìù Notes";
                               

                                Button {
                                    text: "üîñ Save";
                               

                                Button {
                                    text: "üìã Cite";
                               
                            }
                        }
                    }

                    Rectangle {
                        height: 8px;
                    }

                    Rectangle {
                        background: #ffffff;
                        border-width: 1px;
                        border-color: #dee2e6;
                        border-radius: 8px;
                        padding: 12px;
                        margin: 4px;
                        VerticalBox {
                            HorizontalBox {
                                Text {
                                    text: "üåê Medieval History Database";
                                    font-size: 13px;
                                    font-weight: 600;
                                    color: #2c3e50;
                                }

                                Rectangle { }

                                Text {
                                    text: "üîó Web";
                                    font-size: 10px;
                                    color: #1976d2;
                                }
                            }

                            Text {
                                text: "URL: medieval.history.database.com | Status: Active\nContent: Comprehensive database of medieval events and customs\nUse Case: Fact-checking historical details | Last Updated: 2025-11-01";
                                font-size: 10px;
                                color: #666;
                            }

                            HorizontalBox {
                                Button {
                                    text: "üîó Visit";
                               

                                Button {
                                    text: "üìù Notes";
                               

                                Button {
                                    text: "üîñ Bookmark";
                               

                                Button {
                                    text: "üìä Stats";
                               
                            }
                        }
                    }

                    // Enhanced Structure Tool Window
                    export component StructureToolEnhanced inherits ResizableWindow {
                        title: "üìä Plot Structure - Enhanced";
                        Rectangle {
                            y: 35px;
                            height: parent.height - 35px;
                            background: white;
                            border-radius: 6px;
                            VerticalBox {
                                padding: 10px;
                                spacing: 10px;

                                // Tool Title
                                Text {
                                    text: "üìä Plot Structure";
                                    font-size: 16px;
                                    font-weight: 700;
                                }

                                // Plot Type Selection
                                Rectangle {
                                    background: #f8f9fa;
                                    border-radius: 6px;
                                    padding: 12px;
                                    VerticalBox {
                                        Text {
                                            text: "Select Plot Structure Type";
                                            font-size: 14px;
                                            font-weight: 600;
                                            color: #495057;
                                        }

                                        ComboBox {
                                            id: plot_type_combo;
                                            width: parent.width;
                                            model: [
                                                "Three-Part Structure",
                                                "Hero's Journey",
                                                "Save the Cat",
                                                "Freytag's Pyramid",
                                                "Dan Harmon's Circle",
                                                "Blake Snyder's Beat Sheet"
                                            ]
                                            current-index: 0;
                                        }

                                        Text {
                                            text: "Choose a plot structure template to guide your story development";
                                            font-size: 11px;
                                            color: #6c757d;
                                        }
                                    }
                                }

                                // Structure Overview
                                Rectangle {
                                    background: #e9ecef;
                                    border-radius: 6px;
                                    padding: 12px;
                                    VerticalBox {
                                        Text {
                                            text: "Structure Overview";
                                            font-size: 14px;
                                            font-weight: 600;
                                            color: #495057;
                                        }

                                        // Progress indicator
                                        HorizontalBox {
                                            Text {
                                                text: "Progress:";
                                                font-size: 12px;
                                            }

                                            Rectangle {
                                                height: 16px;
                                                width: 200px;
                                                background: #dee2e6;
                                                border-radius: 3px;
                                                Rectangle {
                                                    height: 16px;
                                                    width: 80px; // 40% example
                                                    background: #28a745;
                                                    border-radius: 3px;
                                                }
                                            }

                                            Text {
                                                text: "40%";
                                                font-size: 12px;
                                                color: #495057;
                                            }
                                        }
                                    }
                                }

                                // Plot Stages List
                                Text {
                                    text: "Plot Stages:";
                                    font-size: 14px;
                                    font-weight: 600;
                                    color: #495057;
                                }

                                ScrollView {
                                    height: 300px;
                                    VerticalBox {
                                        // Stage 1
                                        Rectangle {
                                            background: #ffffff;
                                            border-width: 1px;
                                            border-color: #dee2e6;
                                            border-radius: 6px;
                                            padding: 12px;
                                            margin: 4px;
                                            VerticalBox {
                                                HorizontalBox {
                                                    Text {
                                                        text: "1. Ordinary World";
                                                        font-size: 13px;
                                                        font-weight: 600;
                                                        color: #495057;
                                                    }

                                                    Rectangle { }

                                                    CheckBox {
                                                        checked: false;
                                                        font-size: 12px;
                                                    }
                                                }

                                                Text {
                                                    text: "Hero's normal life before the adventure begins";
                                                    font-size: 11px;
                                                    color: #6c757d;
                                                }

                                                TextEdit {
                                                    text: "Enter your story details for this stage...";
                                                    height: 60px;
                                                    font-size: 11px;
                                                    wrap: word-wrap;
                                                }

                                                HorizontalBox {
                                                    StandardButton {
                                                        text: "Add Notes";
                                                        font-size: 11px;
                                                    }

                                                    StandardButton {
                                                        text: "Set Target";
                                                        font-size: 11px;
                                                    }
                                                }
                                            }
                                        }

                                        // Stage 2
                                        Rectangle {
                                            background: #ffffff;
                                            border-width: 1px;
                                            border-color: #dee2e6;
                                            border-radius: 6px;
                                            padding: 12px;
                                            margin: 4px;
                                            VerticalBox {
                                                HorizontalBox {
                                                    Text {
                                                        text: "2. Call to Adventure";
                                                        font-size: 13px;
                                                        font-weight: 600;
                                                        color: #495057;
                                                    }

                                                    Rectangle { }

                                                    CheckBox {
                                                        checked: false;
                                                        font-size: 12px;
                                                    }
                                                }

                                                Text {
                                                    text: "The hero is presented with a challenge or quest";
                                                    font-size: 11px;
                                                    color: #6c757d;
                                                }

                                                TextEdit {
                                                    text: "";
                                                    placeholder-text: "Enter your story details for this stage...";
                                                    height: 60px;
                                                    font-size: 11px;
                                                    wrap: word-wrap;
                                                }
                                            }
                                        }

                                        // Add more stages dynamically based on selected plot type
                                    }
                                }

                                // Structure Controls
                                HorizontalBox {
                                    Button {
                                        text: "‚ûï Add Custom Stage";
                                   

                                    Button {
                                        text: "‚úèÔ∏è Edit Structure";
                                   

                                    Button {
                                        text: "üìã Export Outline";
                                   
                                }

                                HorizontalBox {
                                    Button {
                                        text: "üîÑ Switch Template";
                                   

                                    Button {
                                        text: "üìä View Analytics";
                                   

                                    Button {
                                        text: "üéØ Track Progress";
                                   
                                }
                            }
                        }
                    }
                }
            }

            // Enhanced Research Controls
            HorizontalBox {
                Button {
                    text: "‚ûï Add Source"; }
               

                Button {
                    text: "üì• Import"; }
               

                Button {
                    text: "üîç Find Sources"; }
               
            }

            HorizontalBox {
                Button {
                    text: "üìä Research Plan"; }
               

                Button {
                    text: "üìà Progress"; }
               

                Button {
                    text: "üì§ Citation"; }
               
            }
        }
    }
}
